FROM node:18-alpine

WORKDIR /app

# Build args for Vite env variables
ARG VITE_ENVIRONMENT_TYPE=production
ARG VITE_BACKEND_URL_PROD
ARG VITE_FRONTEND_URL_PROD
ARG VITE_BACKEND_URL_DEV
ARG VITE_FRONTEND_URL_DEV

# Copy and install
COPY package*.json ./
RUN npm install

# Copy source
COPY . .

EXPOSE 5173

CMD ["npm", "run", "dev"]